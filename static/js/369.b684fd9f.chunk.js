"use strict";(self.webpackChunkgoit_react_hw_05_movies=self.webpackChunkgoit_react_hw_05_movies||[]).push([[369],{369:function(e,t,n){n.r(t),n.d(t,{default:function(){return Z}});var r=n(433),a=n(683),u=n(861),c=n(439),s=n(757),i=n.n(s),o=n(791),l=n(766),g=n(929),f=n(567),h=n(394),d=n(184);function p(e){var t=e.searchValue,n=e.searchSubmit,r=(0,o.useState)(""),a=(0,c.Z)(r,2),u=a[0],s=a[1],i=(0,o.useState)(!0),l=(0,c.Z)(i,2),g=l[0],f=l[1];return(0,d.jsxs)("form",{action:"query",onSubmit:function(e){return e.preventDefault(),""!==t&&g?(s(t),void f(!1)):u?(n(u),void f(!1)):alert("\u0412\u0432\u0435\u0434\u0456\u0442\u044c \u0437\u0430\u043f\u0438\u0442")},children:[(0,d.jsx)("input",{type:"text",onChange:function(e){var t=e.target.value;s(t)},value:u}),(0,d.jsx)("button",{type:"submit",children:"\u041f\u043e\u0448\u0443\u043a"})]})}var v=n(87);function Z(){var e,t=(0,o.useState)([]),n=(0,c.Z)(t,2),s=n[0],Z=n[1],x=(0,o.useState)(!0),m=(0,c.Z)(x,2),j=m[0],S=m[1],_=(0,o.useState)({search:"",page:1,get:!1,loading:!1}),b=(0,c.Z)(_,2),w=b[0],y=b[1],k=(0,v.lr)(),q=(0,c.Z)(k,2),C=q[0],D=q[1],E=null!==(e=C.get("query"))&&void 0!==e?e:"";(0,o.useEffect)((function(){if(""!==E&&j)return console.log(E),S(!1),void y({page:1,search:E,get:!0,loading:!0})}),[E,j]),(0,o.useEffect)((function(){if(w.get&&""!==w.search){var e=function(){var e=(0,u.Z)(i().mark((function e(){var t;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,l.g)(w.search,w.page);case 2:(t=e.sent).results.length?1===w.page?(Z(t.results),y((function(e){return(0,a.Z)((0,a.Z)({},e),{},{get:!1,loading:!1})}))):(Z((function(e){return[].concat((0,r.Z)(e),(0,r.Z)(t.results))})),y((function(e){return(0,a.Z)((0,a.Z)({},e),{},{get:!1,loading:!1})}))):alert("\u0417\u0430 \u0432\u0438\u0448\u0438\u043c \u0437\u0430\u043f\u0438\u0442\u043e\u043c ".concat(w.search,"  \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u0438 \u043d\u0435 \u0437\u043d\u0430\u0439\u0434\u0435\u043d\u0456"));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}}),[w]);return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(p,{searchValue:E,searchSubmit:function(e){if(e===w.search)return alert('\u0412\u0438 \u0432\u0432\u0435\u043b\u0438 \u0437\u0430\u043f\u0438\u0442 "'.concat(e,'" \u043f\u043e\u0432\u0442\u043e\u0440\u043d\u043e'));y({page:1,search:e,get:!0,loading:!0}),D({query:e})}}),0!==s.length&&(0,d.jsx)(g.Z,{filmData:s,sectionTitle:'\u0420\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u0438 \u043f\u043e\u0448\u0443\u043a\u0443 \u0437\u0430 \u0437\u0430\u043f\u0438\u0442\u043e\u043c "'.concat(w.search,'"')}),w.loading?(0,d.jsx)(f.g,{}):0!==s.length&&(0,d.jsx)(h.$,{addMoreFn:function(){return y((function(e){return(0,a.Z)((0,a.Z)({},e),{},{page:e.page+1,get:!0,loading:!0})}))}})]})}}}]);
//# sourceMappingURL=369.b684fd9f.chunk.js.map